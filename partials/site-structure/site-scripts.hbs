<script src="{{asset "built/main.min.js"}}"></script>
<script>
    // Dark/Light Mode
    
    var html = document.querySelector('html'),
    darkLight = document.querySelector('.it-dark-light')
    darkLight.addEventListener('click', function(){
       if(html.getAttribute('data-theme') === 'dark'){
           html.setAttribute('data-theme', 'light')
           localStorage.setItem('selected-theme', 'light');
       }else{
           html.setAttribute('data-theme', 'dark')
           localStorage.setItem('selected-theme', 'dark');
       }
       console.log(html.hasAttribute('data-theme'))
    });
</script>

<script>
/* fix in development
window.addEventListener("message", handleMessageListener);

const handleMessageListener = (event:MessageEvent<any>) => {
var origin = event.origin;
if (origin === discourseUrl) {
setIframeStyle();
}
};

const SetIframeStyle = () => {
conset iframe = document.getElementById("discourse-embed-frame")! as any;
if (iframe && iframe.contentWindow) {
iframe.contentWindow.postMessage(
    darkModeFlag ? "dark" : "light",
    discourseUrl
);
}
};
*/
</script>
<script>
  /**
 * Boilerplate Functions
 */
function posf (f, a) { for (var i=0; i < a.length; i++) { if (f(a[i])) return i; } return -1; }
function apos (x, a) { return (typeof x == 'function') ? posf(x,a) : Array.prototype.indexOf.call(a,x) }
function arem (a, x) { var i = apos(x, a); if (i >= 0) { a.splice(i, 1); } return a; }
function afind (x, a) { var i = apos(x, a); return (i >= 0) ? a[i] : null; }
function addClass (el, cl) { if (el) { var a = el.className.split(' '); if (!afind(cl, a)) { a.unshift(cl); el.className = a.join(' ')}} }
function remClass (el, cl) { if (el) { var a = el.className.split(' '); arem(a, cl); el.className = a.join(' ') } }


/**
 * Setup Variables
 */
var previousPosition = window.pageYOffset;
var navbar = document.getElementById("gh-burger");
var navbarHeight = navbar.offsetHeight;

if (previousPosition > navbarHeight) {
    addClass(navbar, 'headroom');
}

var navbar2 = document.getElementById("gh-head");
var navbar2Height = navbar2.offsetHeight;

if (previousPosition > navbar2Height) {
    addClass(navbar2, 'headroom');
}


/**
 * Headroom Action
 */
window.onscroll = function() {
  
    var currentPosition = window.pageYOffset;

      addClass(navbar, 'headroom');
      addClass(navbar2, 'headroom');
};
</script>
        {{^is "page"}}
    <script>
            document.addEventListener("DOMContentLoaded", () => {
            tocbot.init({
                tocSelector: '.toc',
                contentSelector: '.toc-content',
                headingSelector: 'h1',
                hasInnerContainers: true,
                scrollSmooth: true,
                scrollSmoothDuration: 420,
                headingsOffset: 40,
                scrollSmoothOffset: -40
            });

            var toc,
            toccheck = document.getElementByClassName('toc');
            if (toccheck != null) {
            var toc = document.getElementsByClassName('toc')[0];
            if (toc.childNodes.length > 0) {
                document.getElementById('sidebar-toc').style.display = 'flow-root';
    )}
    else {
           toc = null;
    };
    </script>
        {{/is}}
<script>
  window.addEventListener("load", () => {
    flyingPages({
      delay: 0,
      ignoreKeywords: ["\/ghost","\/ghost\/#","\/p\/","\/signup\/","\/signin\/","\/account\/","#signout","\/public\/members.js","?action=signin","?action=signup","#",".png",".jpeg",".jpg",".gif",".svg"],
      maxRPS: 3,
      hoverDelay: 50
    });
  });
</script>